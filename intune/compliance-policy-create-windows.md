---
title: "Windows 用のコンプライアンス ポリシーの作成方法"
titleSuffix: Azure portal
description: "Windows デバイス用のコンプライアンス ポリシーの作成方法について説明します。\""
keywords: 
author: andredm7
ms.author: andredm
manager: angrobe
ms.date: 12/07/2016
ms.topic: article
ms.prod: 
ms.service: microsoft-intune
ms.technology: 
ms.assetid: 13fc7783-d4de-47d0-b1b8-4c8710a9e6ab
ms.reviewer: muhosabe
ms.suite: ems
ms.custom: intune-azure
ms.openlocfilehash: 9eb817939b2bc663ea2c28978aa64fee5f440de4
ms.sourcegitcommit: 2459bfda07a2afd2cfcd94a1972a3fb2e565ce8d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/22/2018
---
# <a name="how-to-create-a-device-compliance-policy-for-windows-devices-in-intune"></a>Intune で Windows デバイス用のデバイス コンプライアンス ポリシーを作成する方法


[!INCLUDE [azure_portal](./includes/azure_portal.md)]

コンプライアンス ポリシーは、プラットフォームごとに作成されます。  また、Azure Portal でコンプライアンス ポリシーを作成できます。 コンプライアンス ポリシーの詳細については、[デバイスのコンプライアンス](device-compliance.md)に関するトピックを参照してください。 コンプライアンス ポリシーを作成する前に対応する必要がある前提条件については、[デバイス コンプライアンスの概要](device-compliance-get-started.md)に関するトピックを参照してください。

次の表では、条件付きアクセス ポリシーとコンプライアンス ポリシーを使用する場合に非準拠設定をどのように管理するかについて説明しています。

---------------------------

| **ポリシー設定** | **Windows 8.1 以降** | **Windows Phone 8.1 以降** |
|----| ----| --- |
| **PIN またはパスワードの構成** | 修復 | 修復 |   
| **デバイスの暗号化** | 該当なし | 修復 |   
| **脱獄またはルート化されたデバイス** | 適用できません | 適用できません |  
| **電子メールのプロファイル** | 適用できません | 適用できません |   
| **最小 OS バージョン** | 検疫済み | 検疫済み |   
| **最大 OS バージョン** | 検疫済み | 検疫済み |   
| **Windows 正常性構成証明書** | 検疫済み: Windows 10 および Windows 10 Mobile|該当なし: Windows 8.1 |

-------------------------------

**修復** = デバイス オペレーティング システムによって準拠が強制されます  (たとえば、ユーザーは PIN を設定するように強制されます)。+

**検疫済み** = デバイス オペレーティング システムによって準拠が強制されません  (たとえば、Android デバイスでは、ユーザーはデバイスの暗号化を強制されません)。デバイスが準拠していない場合、次のアクションが行われます。+

- ユーザーに条件付きアクセス ポリシーを適用すると、デバイスがブロックされます。
- ポータル サイトは、コンプライアンスの問題をユーザーに通知します。

## <a name="create-a-compliance-policy-in-the-azure-portal"></a>Azure Portal でコンプライアンス ポリシーを作成する

1. **[Intune]** ブレードで、**[デバイス コンプライアンスの設定]** を選択します。 **[管理]** で **[All device compliance policies (すべてのデバイス コンプライアンス ポリシー)]**、**[作成]** の順に選択します。
2. 名前と説明を入力し、このポリシーを適用するプラットフォームを選択します。
3. **[コンプライアンス要件]** を選択して、[コンプライアンス要件] ブレードを開きます。  ここで **[セキュリティ]**、**[デバイスのヘルス]**、**[デバイスのプロパティ]** の設定を指定します。終了したら、**[OK]** を選択します。

<!--- 4. Choose **Actions for noncompliance** to say what actions should happen when a device is determined as noncompliant with this policy.
5. In the **Actions for noncompliance** blade, choose **Add** to create a new action.  The action parameters blade allows you to specify the action, email recipients that should receive the notification in addition to the user of the device, and the content of the notification that you want to send.
6. The message template option allows you to create several custom emails depending on when the action is set to take. For example, you can create a message for notifications that are sent for the first time and a different message for final warning before access is blocked. The custom messages that you create can be used for all your device compliance policy.
7. Specify the **Grace period** which determines when that action to take place.  For example, you may want to send a notification as soon as the device is evaluated as noncompliant, but allow some time before enforcing the conditional access policy to block access to company resources like SharePoint online.
8. Choose **Add** to finish creating the action.
9. You can create multiple actions and the sequence in which they should occur. Choose **Ok** when you are finished creating all the actions.--->

## <a name="assign-user-groups"></a>ユーザー グループを割り当てる

コンプライアンス ポリシーをユーザーに割り当てるには、構成したポリシーを選択します。 既存のポリシーは、**[コンプライアンス ポリシー]** ブレードで確認できます。

1. ユーザーに割り当てるポリシーを選択し、**[割り当て]** を選択します。 これにより表示されたブレードで、**[Azure Active Directory セキュリティ グループ]** を選択し、ポリシーに割り当てることができます。
2. **[グループの選択]** を選択すると、ブレードが開き、Azure AD セキュリティ グループが表示されます。  **[選択]** を選択すると、ポリシーがユーザーに展開されます。

ポリシーがユーザーに適用されました。  ポリシーの対象となっているユーザーが使用しているデバイスは、コンプライアンスについて評価されます。

<!---## Compliance policy settings--->

## <a name="system-security-settings"></a>システム セキュリティ設定

### <a name="password"></a>パスワード

- **モバイル デバイスのロック解除にパスワードを必要とする:** デバイスにアクセスするユーザーにパスワードを入力するよう求める場合は、**[はい]** に設定します。
- **[単純なパスワードを許可する]:** これを **[はい]** に設定すると、ユーザーは単純なパスワード (**1234**、**1111** など) を作成できます。
- **[パスワードの最小文字数]:** ユーザーのパスワードに含まれている必要がある数字または文字の最小数を指定します。
- **[必要なパスワードの種類]:** ユーザーが **[英数字]** パスワードまたは **[数字]** パスワードのどちらを作成する必要があるかを指定します。

Windows を実行し Microsoft アカウントでアクセスされるデバイスについては、[パスワードの最小文字数] が 8 文字より長い場合、または [文字セットの最小数] が 2 よりも大きい場合、コンプライアンス ポリシーは正しく評価を行うことができません。

- **[文字セットの最小数]:** **[必要なパスワードの種類]** が **[英数字]** に設定されている場合、この設定ではパスワードに含める必要がある、文字セットの最小数を指定します。 次の 4 つの文字セットがあります。
  - 小文字
  - 大文字
  - 記号
  - 数字

この設定で大きな数値を設定する場合、ユーザーはより複雑なパスワードを作成する必要があります。 Windows を実行し Microsoft アカウントでアクセスされるデバイスについては、[パスワードの最小文字数] が 8 文字より長い場合、または [文字セットの最小数] が 2 よりも大きい場合、コンプライアンス ポリシーは正しく評価を行うことができません。

- **[デバイスの画面がロックされるまでの非アクティブな時間 (分)]:** ユーザーがパスワードを再入力しなければならなくなるまでのアイドル時間を指定します。
- **[パスワードの有効期限 (日数)]:** 新しいパスワードの作成が必要となるまでのユーザーのパスワードの有効日数を選択します。
- **パスワードの履歴を記憶する:** この設定を **[前のパスワードの再利用を防止]** と組み合わせて使用することで、以前使用されていたパスワードをユーザーが作成することを制限します。
- **前のパスワードの再利用を防止:** **[パスワードの履歴を保存する]** が選択されている場合は、再利用できない、以前に使用されていたパスワードの数を指定します。
- **デバイスがアイドル状態から戻るときにパスワードを必須とする:**この設定は、**[デバイスの画面がロックされるまでの非アクティブな時間 (分)]** 設定と組み合わせて使用する必要があります。 エンドユーザーは、**[デバイスの画面がロックされるまでの非アクティブな時間 (分)]** 設定で指定された時間非アクティブの状態が続いたデバイスにアクセスしようとすると、パスワードを入力するように求められます。

**この設定の対象は Windows 10 Mobile デバイスに限られます。**

### <a name="encryption"></a>暗号化

- **モバイル デバイスで暗号化を必要とする:** リソースに接続するためにデバイスの暗号化を必要とする場合は、**[はい]** に設定します。



## <a name="device-health-settings"></a>デバイスのヘルスの設定

- **デバイスが正常として報告されることを必須とします:** 新規または既存のコンプライアンス ポリシーに、**Windows 10 Mobile** デバイスが正常と報告されることを要求する規則を設定できます。 この設定が有効になっている場合、Windows 10 デバイスは正常性構成証明書サービス (HAS) を使用して次のデータ ポイントで評価されます。
  - **BitLocker が有効になっている:** BitLocker がオンになっている場合は、システムが電源オフ状態または休止状態になっているときに、デバイスはドライブに格納されているデータを不正アクセスから保護できます。 Windows BitLocker ドライブ暗号化により、Windows オペレーティング システム ボリューム上に格納されているすべてのデータが暗号化されます。 BitLocker は、TPM を使用して Windows オペレーティング システムとユーザー データを保護し、コンピューターが放置、紛失、または盗難された場合でも、改ざんを防止するのに役立ちます。 コンピューターに互換性のある TPM が装備されている場合、BitLocker は TPM を使用してデータを保護する暗号化キーをロックします。 その結果、TPM がコンピューターの状態を確認するまで、キーにアクセスできなくなります。
  - **コードの整合性が有効になっている:** コードの整合性は、ドライバーまたはシステム ファイルがメモリに読み込まれるたびに、その整合性を検証する機能です。 コードの整合性は、署名されていないドライバーまたはシステム ファイルがカーネルに読み込まれているかどうか、あるいは管理者特権を持つユーザー アカウントによって実行される悪意のあるソフトウェアによってシステム ファイルが変更されたかどうかを検出します。
  - **セキュア ブートが有効になっている:** セキュア ブートを有効にすると、システムが工場出荷時の信頼できる状態で強制的に起動されます。 また、セキュア ブートを有効にするときは、コンピューターを起動するために使用されるコア コンポーネントに、デバイスを製造した組織によって信頼されている正しい暗号署名が設定されている必要があります。 これは、コンピューターが起動する前に UEFI ファームウェアによって確認されます。 ファイルが改ざんされ、その署名が破損している場合、システムは起動しません。

HAS サービスのしくみについては、「[HealthAttestation CSP](https://msdn.microsoft.com/library/dn934876.aspx)」をご覧ください。

## <a name="device-property-settings"></a>デバイスのプロパティの設定

- **必要な最小 OS バージョン:** デバイスが最小 OS バージョンの要件を満たしていない場合、非準拠として報告されます。 アップグレード方法に関する情報のリンクが表示されます。 エンド ユーザーは、デバイスのアップグレードを行うことを選択できます。アップグレード後は、会社のリソースにアクセスできます。
- **許可される最大 OS バージョン:** ルールに指定された OS バージョンより新しいバージョンの OS がデバイスで使用されている場合、会社のリソースへのアクセスがブロックされ、IT 管理者に問い合わせることをユーザーに促すメッセージが表示されます。対象の OS バージョンを許可するようにルールが変更されるまで、このデバイスを使用して会社のリソースへのアクセスすることはできません。

<!---## Compliance policy settings for Windows PCs--->

## <a name="system-security-settings"></a>システム セキュリティ設定

### <a name="password"></a>パスワード

- **パスワードの最小の長さ:** - Windows 8.1 でサポートされます。

ユーザーのパスワードに含まれている必要がある数字または文字の最小数を指定します。

Microsoft アカウントでアクセスされるデバイスについては、**[パスワードの最小文字数]** が 8 文字より長い場合、または **[文字セットの最小数]** が 2 文字よりも大きい場合、コンプライアンス ポリシーは正しく評価を行うことができません。

- **[必要なパスワードの種類]:** - Windows RT、Windows RT 8.1、Windows 8.1 でサポートされます

ユーザーが **[英数字]** パスワードまたは **[数字]** パスワードのどちらを作成する必要があるかを指定します。

- **[文字セットの最小数]:** - Windows RT、Windows RT 8.1、Windows 8.1 でサポートされます。 **[必要なパスワードの種類]** が **[英数字]** に設定されている場合、この設定ではパスワードに含める必要がある、文字セットの最小数を指定します。 次の 4 つの文字セットがあります。
  - 小文字
  - 大文字
  - 記号
  - [数字]: この設定で大きな数値を設定する場合、ユーザーはより複雑なパスワードを作成する必要があります。

Microsoft アカウントでアクセスされるデバイスについては、**[パスワードの最小文字数]** が 8 文字より長い場合、または **[文字セットの最小数]** が 2 文字よりも大きい場合、コンプライアンス ポリシーは正しく評価を行うことができません。

- **デバイスの画面がロックされるまでの非アクティブな時間 (分):** - Windows RT、Windows RT 8.1、Windows 8.1 でサポートされます。

ユーザーがパスワードを再入力しなければならなくなるまでのアイドル時間を指定します。

- **[パスワードの有効期限 (日数)]:** - Windows RT、Windows RT 8.1、Windows 8.1 でサポートされます。

新しいパスワードの作成が必要となるまでのユーザーのパスワードの有効日数を選択します。

- **パスワードの履歴を保存する:** - Windows RT、Windows RT、Windows 8.1 でサポートされます。

この設定を **[前のパスワードの再利用を防止]** と組み合わせて使用することで、以前使用されていたパスワードをユーザーが作成することを制限します。

- **以前のパスワードを再利用できないようにする:** - Windows RT、Windows RT 8.1、Windows 8.1 でサポートされます。

**[パスワードの履歴を保存する]** が選択されている場合は、再利用できない、以前に使用されていたパスワードの数を指定します。


## <a name="device-health-settings"></a>デバイスのヘルスの設定

- **デバイスが正常として報告されることを必須とします:** - Windows 10 デバイスでサポートされます。 新規または既存のコンプライアンス ポリシーに、Windows 10 デバイスが正常と報告されることを要求する規則を設定できます。 この設定が有効になっている場合、Windows 10 デバイスは正常性構成証明書サービス (HAS) を使用して次のデータ ポイントで評価されます。
  - **BitLocker が有効になっている:** BitLocker がオンになっている場合は、システムが電源オフ状態または休止状態になっているときに、デバイスはドライブに格納されているデータを不正アクセスから保護できます。 Windows BitLocker ドライブ暗号化により、Windows オペレーティング システム ボリューム上に格納されているすべてのデータが暗号化されます。 BitLocker は、TPM を使用して Windows オペレーティング システムとユーザー データを保護し、コンピューターが放置、紛失、または盗難された場合でも、改ざんを防止するのに役立ちます。 コンピューターに互換性のある TPM が装備されている場合、BitLocker は TPM を使用してデータを保護する暗号化キーをロックします。 その結果、TPM がコンピューターの状態を確認するまで、キーにアクセスできなくなります。
  - **コードの整合性が有効になっている:** コードの整合性は、ドライバーまたはシステム ファイルがメモリに読み込まれるたびに、その整合性を検証する機能です。 コードの整合性は、署名されていないドライバーまたはシステム ファイルがカーネルに読み込まれているかどうか、あるいは管理者特権を持つユーザー アカウントによって実行される悪意のあるソフトウェアによってシステム ファイルが変更されたかどうかを検出します。
  - **セキュア ブートが有効になっている:** セキュア ブートを有効にすると、システムが工場出荷時の信頼できる状態で強制的に起動されます。 また、セキュア ブートを有効にするときは、コンピューターを起動するために使用されるコア コンポーネントに、デバイスを製造した組織によって信頼されている正しい暗号署名が設定されている必要があります。 これは、コンピューターが起動する前に UEFI ファームウェアによって確認されます。 ファイルが改ざんされ、その署名が破損している場合、システムは起動しません。
  - **起動時マルウェア対策が有効になっている:** 起動時マルウェア対策 (ELAM) は、ネットワーク内のコンピューターが起動してからサードパーティ製のドライバーが初期化されるまでの間、そのコンピューターを保護します。

HAS サービスのしくみについては、「[HealthAttestation CSP](https://msdn.microsoft.com/library/dn934876.aspx)」をご覧ください。

## <a name="device-property-settings"></a>デバイスのプロパティの設定

- **Minimum OS required (必要な最小 OS バージョン):** - Windows 8.1 と Windows 10 でサポートされます。

ここには、major.minor.build 番号を指定します。 バージョン番号は、```winver``` コマンドによって返されるバージョンと対応する必要があります。

指定された OS バージョンよりデバイスのバージョンが低い場合、非準拠としてレポートされます。 アップグレード方法に関する情報のリンクが表示されます。 エンド ユーザーは、デバイスのアップグレードを行うことを選択できます。アップグレード後は、会社のリソースにアクセスできます。

- **Maximum OS version allowed (許可される最大 OS バージョン):** Windows 8.1 と Windows 10 でサポートされます。

ルールに指定された OS バージョンより新しいバージョンの OS がデバイスで使用されている場合、会社のリソースへのアクセスがブロックされ、IT 管理者に問い合わせることをユーザーに促すメッセージが表示されます。対象の OS バージョンを許可するようにルールが変更されるまで、このデバイスを使用して会社のリソースへのアクセスすることはできません。

**[Minimum OS required (必要な最小 OS バージョン)]** と **[Maximum OS version allowed (許可される最大 OS バージョン)]** の設定に使用する OS バージョンは、コマンド プロンプトから **winver** コマンドを実行して確認してください。 winver コマンドから返されるのは、内部的な OS バージョンです。+

- Windows 8.1 PC の場合、バージョン **3** が返されます。 Windows に関して OS バージョンのルールを Windows 8.1 に設定した場合、デバイスに Windows 8.1 がインストールされていても、そのデバイスは非準拠として報告されます。
- Windows 10 を実行する PC の場合は、&quot;10.0&quot;+ に続けて、winver コマンドから返される OS ビルド番号を指定する必要があります。

<!--- ## Next steps

[How to monitor device compliance](device-compliance-monitor.md)--->
